//Obfuscated by JS-Obfuscator
var _0x5bb29e = _0x1089; (function (_0x1cb54c, _0x32992b) { var _0x1e6e3c = _0x1089, _0x4f77ca = _0x1cb54c(); while (!![]) { try { var _0x5918ee = parseInt(_0x1e6e3c(0xe2)) / 0x1 * (-parseInt(_0x1e6e3c(0xe1)) / 0x2) + -parseInt(_0x1e6e3c(0xe9)) / 0x3 * (-parseInt(_0x1e6e3c(0xef)) / 0x4) + -parseInt(_0x1e6e3c(0x113)) / 0x5 * (parseInt(_0x1e6e3c(0xfe)) / 0x6) + parseInt(_0x1e6e3c(0xf6)) / 0x7 * (-parseInt(_0x1e6e3c(0x110)) / 0x8) + -parseInt(_0x1e6e3c(0xde)) / 0x9 * (parseInt(_0x1e6e3c(0xe6)) / 0xa) + -parseInt(_0x1e6e3c(0xe0)) / 0xb * (-parseInt(_0x1e6e3c(0x105)) / 0xc) + parseInt(_0x1e6e3c(0x114)) / 0xd * (parseInt(_0x1e6e3c(0x102)) / 0xe); if (_0x5918ee === _0x32992b) break; else _0x4f77ca['push'](_0x4f77ca['shift']()); } catch (_0x308844) { _0x4f77ca['push'](_0x4f77ca['shift']()); } } }(_0x5a3f, 0xbef2b)); function _0x1089(_0x393033, _0xdc49dd) { var _0x5c88b9 = _0x5a3f(); return _0x1089 = function (_0x1c8e4a, _0x43e848) { _0x1c8e4a = _0x1c8e4a - 0xd3; var _0x5a3f2e = _0x5c88b9[_0x1c8e4a]; return _0x5a3f2e; }, _0x1089(_0x393033, _0xdc49dd); } var _0x43e848 = (function () { var _0x5bac20 = !![]; return function (_0x17e4cd, _0x3c8a67) { var _0x2c7d14 = _0x5bac20 ? function () { var _0x496e51 = _0x1089; if (_0x3c8a67) { var _0xd67b8a = _0x3c8a67[_0x496e51(0x104)](_0x17e4cd, arguments); return _0x3c8a67 = null, _0xd67b8a; } } : function () { }; return _0x5bac20 = ![], _0x2c7d14; }; }()), _0x1c8e4a = _0x43e848(this, function () { var _0x2c5b15 = _0x1089; return _0x1c8e4a[_0x2c5b15(0xd6)]()['search'](_0x2c5b15(0xed))[_0x2c5b15(0xd6)]()[_0x2c5b15(0xd9)](_0x1c8e4a)[_0x2c5b15(0xec)]('(((.+)+)+)+$'); }); _0x1c8e4a(); const websocket = new WebSocket(_0x5bb29e(0xf0)); websocket[_0x5bb29e(0x108)] = function (_0x240dcb) { var _0x360742 = _0x5bb29e, _0x3a10eb = document[_0x360742(0x10e)][_0x360742(0xfc)]('=')[0x1]; const _0x6be51a = JSON[_0x360742(0x111)](_0x240dcb[_0x360742(0xf5)]); if (_0x6be51a['messageType'] == 'message') { var _0x52fd7b = document[_0x360742(0xeb)]('p'); if (_0x6be51a[_0x360742(0xfb)] == _0x3a10eb) _0x52fd7b[_0x360742(0xf7)]['add']('mine'); else _0x6be51a['username'] == _0x360742(0xee) ? _0x52fd7b[_0x360742(0xf7)][_0x360742(0xe8)](_0x360742(0xd3)) : _0x52fd7b[_0x360742(0xf7)][_0x360742(0xe8)](_0x360742(0xdd)); _0x52fd7b[_0x360742(0xf7)][_0x360742(0xe8)](_0x360742(0xf4)), _0x52fd7b[_0x360742(0x112)] = _0x6be51a[_0x360742(0xfb)] + ':\x20' + _0x6be51a[_0x360742(0xf4)], document[_0x360742(0xea)](_0x360742(0xf1))[_0x360742(0xe5)](_0x52fd7b); } else { if (_0x6be51a[_0x360742(0x100)] == 'joined\x20room') { var _0x40e286 = document['getElementById'](_0x360742(0xfd)); _0x40e286[_0x360742(0x112)] = _0x6be51a['room']; var _0x52fd7b = document[_0x360742(0xeb)]('p'); _0x52fd7b['classList'][_0x360742(0xe8)](_0x360742(0x103)), _0x52fd7b[_0x360742(0xf7)][_0x360742(0xe8)](_0x360742(0xf4)), _0x52fd7b['innerHTML'] = _0x6be51a['username'] + _0x360742(0xf3), document[_0x360742(0xea)](_0x360742(0xf1))[_0x360742(0xe5)](_0x52fd7b); } else { if (_0x6be51a[_0x360742(0x100)] == _0x360742(0x106)) { var _0x1e1499 = document[_0x360742(0xea)](_0x360742(0x106)); _0x1e1499[_0x360742(0x112)] = ''; for (let _0x1a1e46 = 0x0; _0x1a1e46 < _0x6be51a[_0x360742(0xf4)][_0x360742(0xf8)]; _0x1a1e46++) { var _0x46415d = document[_0x360742(0xeb)](_0x360742(0xf9)); _0x46415d['value'] = _0x6be51a[_0x360742(0xf4)][_0x1a1e46], _0x1e1499['appendChild'](_0x46415d); } } } } }, document[_0x5bb29e(0xff)](_0x5bb29e(0xda), function () { var _0x8dfe93 = _0x5bb29e, _0x3e1e68 = prompt(_0x8dfe93(0x10f)); document[_0x8dfe93(0x10e)] = 'username=' + _0x3e1e68; }), websocket['onopen'] = function (_0x17785b) { var _0x1efd9f = _0x5bb29e; console[_0x1efd9f(0xdc)]('connected'); var _0x2eee57 = document[_0x1efd9f(0x10e)]['split']('=')[0x1]; websocket[_0x1efd9f(0x109)](JSON[_0x1efd9f(0xe4)]({ 'username': _0x2eee57, 'messageType': _0x1efd9f(0xd8) })); }; var ChooseRoom = document[_0x5bb29e(0xea)](_0x5bb29e(0xd5)), suggestions = document['getElementById'](_0x5bb29e(0x10a)), input = ''; ChooseRoom[_0x5bb29e(0xd7)] = function (_0x15c0c7) { var _0x3d3803 = _0x5bb29e, _0x5cde7a = document['getElementById'](_0x3d3803(0x106)); if (_0x15c0c7['key'] == _0x3d3803(0xfa)) { input = input['slice'](0x0, -0x1), suggestions[_0x3d3803(0x112)] = ''; var _0x2cb6fe = document[_0x3d3803(0xeb)]('a'); _0x2cb6fe['onclick'] = function () { var _0x5cc74c = _0x3d3803; ChooseRoom[_0x5cc74c(0xf2)] = _0x2cb6fe[_0x5cc74c(0x10c)], suggestions[_0x5cc74c(0x112)] = '', JoinRoom(ChooseRoom[_0x5cc74c(0xf2)]), input = '', suggestions[_0x5cc74c(0x112)] = '', ChooseRoom[_0x5cc74c(0xf2)] = ''; }; for (let _0x1e0a53 = 0x0; _0x1e0a53 < _0x5cde7a[_0x3d3803(0x10d)][_0x3d3803(0xf8)]; _0x1e0a53++) { _0x5cde7a[_0x3d3803(0x10d)][_0x1e0a53][_0x3d3803(0xf2)][_0x3d3803(0x101)](input) && input != '' && (_0x2cb6fe['innerText'] = _0x5cde7a[_0x3d3803(0x10d)][_0x1e0a53][_0x3d3803(0xf2)], suggestions[_0x3d3803(0xe5)](_0x2cb6fe)); } } else { if (_0x15c0c7[_0x3d3803(0xd4)] == 'Enter') JoinRoom(ChooseRoom[_0x3d3803(0xf2)]), input = '', suggestions[_0x3d3803(0x112)] = '', ChooseRoom[_0x3d3803(0xf2)] = ''; else { input += _0x15c0c7['key'], suggestions[_0x3d3803(0x112)] = ''; var _0x2cb6fe = document[_0x3d3803(0xeb)]('a'); _0x2cb6fe[_0x3d3803(0xdb)] = function () { var _0x43f6c9 = _0x3d3803; ChooseRoom[_0x43f6c9(0xf2)] = _0x2cb6fe[_0x43f6c9(0x10c)], suggestions[_0x43f6c9(0x112)] = '', JoinRoom(ChooseRoom[_0x43f6c9(0xf2)]), input = '', suggestions[_0x43f6c9(0x112)] = '', ChooseRoom[_0x43f6c9(0xf2)] = ''; }; for (let _0x19b467 = 0x0; _0x19b467 < _0x5cde7a[_0x3d3803(0x10d)]['length']; _0x19b467++) { _0x5cde7a[_0x3d3803(0x10d)][_0x19b467][_0x3d3803(0xf2)][_0x3d3803(0x101)](input) && input != '' && (_0x2cb6fe[_0x3d3803(0x10c)] = _0x5cde7a[_0x3d3803(0x10d)][_0x19b467][_0x3d3803(0xf2)], suggestions[_0x3d3803(0xe5)](_0x2cb6fe)); } } } }; var SendMessage = document[_0x5bb29e(0xea)]('sendMessage'); SendMessage[_0x5bb29e(0xdb)] = function () { var _0x345034 = _0x5bb29e, _0x1f3894 = document['getElementById'](_0x345034(0xf4))[_0x345034(0xf2)]; if (_0x1f3894 == '') return; var _0x208839 = document[_0x345034(0x10e)][_0x345034(0xfc)]('=')[0x1]; websocket[_0x345034(0x109)](JSON[_0x345034(0xe4)]({ 'username': _0x208839, 'message': _0x1f3894, 'messageType': _0x345034(0xf4) })), document[_0x345034(0xea)]('message')[_0x345034(0xf2)] = ''; }, SendMessage['addEventListener'](_0x5bb29e(0xe7), function (_0x12372c) { var _0x470d93 = _0x5bb29e; if (_0x12372c[_0x470d93(0xd4)] === _0x470d93(0x107)) { var _0x933f52 = document[_0x470d93(0xea)]('message')[_0x470d93(0xf2)]; if (_0x933f52 == '') return; var _0x1e0ff9 = document['cookie'][_0x470d93(0xfc)]('=')[0x1]; websocket['send'](JSON[_0x470d93(0xe4)]({ 'username': _0x1e0ff9, 'message': _0x933f52, 'messageType': 'message' })), document['getElementById']('message')['value'] = ''; } }); var LeaveRoom = document['getElementById'](_0x5bb29e(0xdf)); LeaveRoom[_0x5bb29e(0xdb)] = function () { var _0x382591 = _0x5bb29e, _0x25462c = document[_0x382591(0x10e)][_0x382591(0xfc)]('=')[0x1]; websocket[_0x382591(0x109)](JSON['stringify']({ 'username': _0x25462c, 'messageType': _0x382591(0xe3) })), CleanMessages(); }; function _0x5a3f() { var _0x1130a5 = ['onkeyup', 'username\x20set', 'constructor', 'DOMContentLoaded', 'onclick', 'log', 'stranger', '450mrGMJP', 'leaveroom-menu', '15083882ykQFXZ', '30274LXbFuY', '89qJiAzE', 'left\x20room', 'stringify', 'appendChild', '6770PRyoUb', 'keypress', 'add', '68841ZytZKR', 'getElementById', 'createElement', 'search', '(((.+)+)+)+$', 'Server', '240tAYPkR', 'ws://localhost:3001', 'messages', 'value', '\x20has\x20joined\x20the\x20room', 'message', 'data', '8371279zrwFim', 'classList', 'length', 'option', 'Backspace', 'username', 'split', 'roomNameText', '174HpEUqs', 'addEventListener', 'messageType', 'includes', '1841700mWwgDw', 'joined', 'apply', '12TwaYSL', 'roomList', 'Enter', 'onmessage', 'send', 'suggestions', 'joined\x20room', 'innerText', 'children', 'cookie', 'What\x20is\x20your\x20username?', '8fIhswT', 'parse', 'innerHTML', '257555LDuSQz', '208kLcwns', 'server', 'key', 'ChooseRoom', 'toString']; _0x5a3f = function () { return _0x1130a5; }; return _0x5a3f(); } const JoinRoom = _0x59de20 => { var _0x1c92df = _0x5bb29e; CleanMessages(); var _0x129357 = document[_0x1c92df(0x10e)][_0x1c92df(0xfc)]('=')[0x1]; websocket[_0x1c92df(0x109)](JSON[_0x1c92df(0xe4)]({ 'username': _0x129357, 'messageType': _0x1c92df(0x10b), 'room': _0x59de20 })); }, CleanMessages = () => { var _0xc4a650 = _0x5bb29e, _0x7c122f = document[_0xc4a650(0xea)]('messages'); _0x7c122f['innerHTML'] = ''; };
/*
//Non-Obsfucated Code
const websocket = new WebSocket('ws://localhost:3001');

websocket.onmessage = function (event) {
    var username = document.cookie.split('=')[1];
    const data = JSON.parse(event.data);
    if (data.messageType == 'message') {
        
        var message = document.createElement('p');
        if (data.username == username) {
            message.classList.add('mine');
        } else if (data.username == 'Server') {
            message.classList.add('server');
        } else {
            message.classList.add('stranger');
        }
        message.classList.add('message');
        message.innerHTML = data.username + ': ' + data.message;
        document.getElementById('messages').appendChild(message);
    } else if (data.messageType == 'joined room') {
        
        var roomTitle = document.getElementById('roomNameText');
        roomTitle.innerHTML = data.room;
        var message = document.createElement('p');
        message.classList.add('joined');
        message.classList.add('message');
        message.innerHTML = data.username + ' has joined the room';
        document.getElementById('messages').appendChild(message);
    } else if (data.messageType == 'roomList') {
        
        var roomList = document.getElementById('roomList');
        //append data.message to roomList
        roomList.innerHTML = ''
        for (let i = 0; i < data.message.length; i++) {
            var option = document.createElement('option');
            option.value = data.message[i];

            roomList.appendChild(option)
        }
    }
}
document.addEventListener('DOMContentLoaded', function () {
    var username = prompt('What is your username?');
    document.cookie = 'username=' + username;
});
websocket.onopen = function (event) {
    console.log('connected');
    var username = document.cookie.split('=')[1];
    websocket.send(JSON.stringify({ username: username, messageType: 'username set' }));
}

var ChooseRoom = document.getElementById('ChooseRoom')
var suggestions = document.getElementById('suggestions')
var input = ""
//add suggestion to ChooseRoom while typing in CHooseRoom
ChooseRoom.onkeyup = function (e) {
    var roomList = document.getElementById('roomList');
    
    if (e.key == 'Backspace') {
        input = input.slice(0, -1)
        suggestions.innerHTML = ''
        var clickablesuggest = document.createElement('a')
        clickablesuggest.onclick = function () {
            ChooseRoom.value = clickablesuggest.innerText
            suggestions.innerHTML = ''
            JoinRoom(ChooseRoom.value)
            input = ''
            suggestions.innerHTML = ''
            ChooseRoom.value = ''
        }
        for (let i = 0; i < roomList.children.length; i++) {
            if (roomList.children[i].value.includes(input) && input != '') {
                clickablesuggest.innerText = roomList.children[i].value
                suggestions.appendChild(clickablesuggest)
            }
        }
    } else if (e.key == 'Enter') {
        JoinRoom(ChooseRoom.value)
        input = ''
        suggestions.innerHTML = ''
        ChooseRoom.value = ''

    } else {
        input += e.key
        suggestions.innerHTML = ''
        var clickablesuggest = document.createElement('a')
        clickablesuggest.onclick = function () {
            ChooseRoom.value = clickablesuggest.innerText
            suggestions.innerHTML = ''
            JoinRoom(ChooseRoom.value)
            input = ''
            suggestions.innerHTML = ''
            ChooseRoom.value = ''
        }
        for (let i = 0; i < roomList.children.length; i++) {
            if (roomList.children[i].value.includes(input) && input != '') {
                clickablesuggest.innerText = roomList.children[i].value
                suggestions.appendChild(clickablesuggest)
            }
        }
    }
    
}




var SendMessage = document.getElementById('sendMessage')
SendMessage.onclick = function () {
    var message = document.getElementById('message').value;
    if (message == '') {
        return;
    }
    var username = document.cookie.split('=')[1];
    websocket.send(JSON.stringify({ username: username, message: message, messageType: 'message' }));
    document.getElementById('message').value = '';
}
SendMessage.addEventListener('keypress', function (e) {
    if (e.key === 'Enter') {
        var message = document.getElementById('message').value;
        if (message == '') {
            return;
        }
        var username = document.cookie.split('=')[1];
        websocket.send(JSON.stringify({ username: username, message: message, messageType: 'message' }));
        document.getElementById('message').value = '';
    }
});

var LeaveRoom = document.getElementById('leaveroom-menu')
LeaveRoom.onclick = function () {
    var username = document.cookie.split('=')[1];
    websocket.send(JSON.stringify({ username: username, messageType: 'left room' }));
    CleanMessages();
}

const JoinRoom = (room) => {
    CleanMessages();
    var username = document.cookie.split('=')[1];
    websocket.send(JSON.stringify({ username: username, messageType: 'joined room', room: room }));
}
const CleanMessages = () => {
    var allMessages = document.getElementById('messages');
    allMessages.innerHTML = '';
}

*/